<div
  data-modal-target="overlay"
  class="hidden fixed inset-0 bg-black/50 flex items-center justify-center">

  <div class="bg-white w-full max-w-lg p-6 rounded-lg relative">

    <button
      data-action="click->modal#close"
      class="absolute top-2 right-2">
      ‚úï
    </button>

    <!-- üåø „Éï„É¨„Éº„Éê„Éº -->
    <div data-modal-target="flavorPanel" class="hidden">

      <h2 class="font-bold mb-4">„Éï„É¨„Éº„Éê„Éº</h2>

      <div data-controller="flavor">
        <% @flavor_categories.each do |category| %>

          <!-- Â§ß„Ç´„ÉÜ„Ç¥„É™„Éñ„É≠„ÉÉ„ÇØ -->
          <div>

            <!-- „Éò„ÉÉ„ÉÄ„ÉºË°å -->
            <div class="flex items-center justify-between">

              <!-- ‚ñΩ ÈñãÈñâ„Éú„Çø„É≥ -->
              <button
                data-action="click->flavor#toggle"
                class="font-semibold">
                ‚ñΩ
              </button>

              <!-- Â§ß„Ç´„ÉÜ„Ç¥„É™Ê§úÁ¥¢ -->
              <%= link_to category.name,
                tea_products_path(
                  q: (params[:q]&.to_unsafe_h || {}).merge(
                    flavors_flavor_category_id_eq: category.id
                  )
                ),
                class: "font-semibold flex-1 ml-2 text-left hover:underline" %>

            </div>

            <!-- üëá „Åì„Åì„Åå toggle ÂØæË±°Ôºà„Éú„Çø„É≥„ÅÆÁõ¥Âæå„Å´ÁΩÆ„ÅèÔºâ -->
            <div class="hidden ml-6">

              <% category.flavors.each do |flavor| %>
                <%= link_to flavor.name,
                  tea_products_path(
                    q: (params[:q]&.to_unsafe_h || {}).merge(
                      flavors_id_eq: flavor.id
                    )
                  ),
                  class: "block py-1 text-sm" %>
              <% end %>

            </div>

          </div>
        <% end %>
      </div>

    </div>

    <!-- üè∑ „Éñ„É©„É≥„Éâ -->
    <div data-modal-target="brandPanel" class="hidden">

      <h2 class="font-bold mb-4">„Éñ„É©„É≥„Éâ</h2>

      <% @brands.each do |brand| %>
        <%= link_to brand.name_ja || brand.name_en,
          tea_products_path(
            q: (params[:q]&.to_unsafe_h || {}).merge(
              brand_id_eq: brand.id
            )
          ),
          class: "block py-1 text-sm" %>
      <% end %>

    </div>

  </div>
</div>
